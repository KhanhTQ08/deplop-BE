<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Grid System - Kaiadmin Bootstrap 5 Admin Dashboard</title>
<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
	name="viewport" />
<link rel="icon" href="../assets/img/kaiadmin/favicon.ico"
	type="image/x-icon" />

<!-- Fonts and icons -->
<script src="../assets/js/plugin/webfont/webfont.min.js"></script>
<script>
      WebFont.load({
        google: { families: ["Public Sans:300,400,500,600,700"] },
        custom: {
          families: [
            "Font Awesome 5 Solid",
            "Font Awesome 5 Regular",
            "Font Awesome 5 Brands",
            "simple-line-icons",
          ],
          urls: ["../assets/css/fonts.min.css"],
        },
        active: function () {
          sessionStorage.fonts = true;
        },
      }); 
      
      document.addEventListener("DOMContentLoaded", function() {
    	  const viewMoreButtons = document.querySelectorAll('.view-more');

    	  viewMoreButtons.forEach(button => {
    	    button.addEventListener('click', function() {
    	      const content = this.previousElementSibling;
    	      if (content.style.whiteSpace === "nowrap") {
    	        content.style.whiteSpace = "normal";  // Hiển thị toàn bộ nội dung
    	        this.textContent = "Ẩn bớt";
    	      } else {
    	        content.style.whiteSpace = "nowrap";  // Ẩn nội dung dài
    	        this.textContent = "Xem thêm";
    	      }
    	    });
    	  });
    	});
    </script>

<!-- CSS Files -->
<link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="../assets/css/plugins.min.css" />
<link rel="stylesheet" href="../assets/css/kaiadmin.min.css" />

<!-- CSS Just for demo purpose, don't include it in your project -->
<link rel="stylesheet" href="../assets/css/demo.css" />
<link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
	<div class="wrapper">
		<!-- Sidebar -->

		<div th:replace="~{adminViews/aside:: .sidebar}"></div>

		<!-- End Sidebar -->

		<div class="main-panel">
			<!-- header -->

			<div th:replace="~{adminViews/header:: .header}"></div>
			<nav class="navbar navbar-expand-lg navbar-light bg-light">
				<div class="container-fluid">
					<form class="ms-auto">
						<button class="btn btn-outline-warning" type="submit"
							formaction="/add-movie">
							<i class="fa-solid fa-circle-plus"></i> Thêm Phim
						</button>
					</form>


				</div>
			</nav>
			<div class="col-lg-12">
				<h3>Danh sách Phim</h3>
				<div class="table-responsive">
					<table class="table table-striped custom-table">
						<thead>
							<tr>
								<th>Movie ID</th>
								<th>Tên Phim</th>
								<th>Trailer URL</th>
								<th>Nội Dung</th>
								<th>Giới Hạn Tuổi</th>
								<th>Thời Gian</th>
								<th>Đạo Diễn</th>
								<th>Diễn Viên</th>
								<th>Hình Ảnh</th>
								<th>Thể Loại</th>
								<th>Hình Nền</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="promotion: ${promotions}">
								<td th:text="${movie.movieId}"></td>
								<td th:text="${movie.movieName}"></td>
								<td th:text="${movie.trailerUrl}"></td>
								<td><span class="table-content" th:text="${movie.content}"></span>
									<span class="view-more">Xem thêm</span></td>
								<td th:text="${movie.ageRestriction}"></td>
								<td th:text="${movie.duration}"></td>
								<td th:text="${movie.director}"></td>
								<td th:text="${movie.actor}"></td>
								<td><img th:src="${movie.image}" alt="Image"
									style="width: 100px; height: auto;" /></td>
								<td th:text="${movie.genre}"></td>
								<td><img th:src="${movie.image_bg}" alt="Background Image"
									style="width: 100px; height: auto;" /></td>
								<td>
									<div class="row justify-content-center">
										<div class="col-auto">
											<a class="btn btn-primary"
												th:href="'/update-movie?movieId=' + ${movie?.movieId}"
												role="button">Sửa</a>
										</div>
										<div class="col-auto">
											<form method="post" action="/delete-movie">
												<input type="hidden" name="prom_id"
													th:value="${movie?.movieId}" />
												<button type="submit" class="btn btn-danger" role="button">Xoá</button>
											</form>
										</div>

									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>





			<!-- footer -->

			<div th:replace="~{adminViews/footer:: .footer}"></div>

			<!-- footer -->
		</div>

		<!-- Custom template | don't include it in your project! -->


		<!-- End Custom template -->
	</div>
	<!--   Core JS Files   -->
	<script src="../assets/js/core/jquery-3.7.1.min.js"></script>
	<script src="../assets/js/core/popper.min.js"></script>
	<script src="../assets/js/core/bootstrap.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script
		src="../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
	<!-- Moment JS -->
	<script src="../assets/js/plugin/moment/moment.min.js"></script>

	<!-- Chart JS -->
	<script src="../assets/js/plugin/chart.js/chart.min.js"></script>

	<!-- jQuery Sparkline -->
	<script
		src="../assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

	<!-- Chart Circle -->
	<script src="../assets/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Datatables -->
	<script src="../assets/js/plugin/datatables/datatables.min.js"></script>

	<!-- Bootstrap Notify -->
	<script
		src="../assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

	<!-- jQuery Vector Maps -->
	<script src="../assets/js/plugin/jsvectormap/jsvectormap.min.js"></script>
	<script src="../assets/js/plugin/jsvectormap/world.js"></script>

	<!-- Sweet Alert -->
	<script src="../assets/js/plugin/sweetalert/sweetalert.min.js"></script>

	<!-- Kaiadmin JS -->
	<script src="../assets/js/kaiadmin.min.js"></script>

	<!-- Kaiadmin DEMO methods, don't include it in your project! -->
	<script src="../assets/js/setting-demo2.js"></script>
</body>

</html>
