<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${title} + ' - For The Love'">CHI_TIET_PHIM</title>
<link rel="icon" href="/slider_1-main/image/ok.png" type="image/png">

<link rel="stylesheet" href="/slider_1-main/css/style.css">
<link rel="stylesheet" href="/slider_1-main/css/chi_tiet_phim.css">
<!-- SweetAlert2 CSS -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztCQT..."
	crossorigin="anonymous">

<!-- Bootstrap Icons CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
	rel="stylesheet">

<!-- FontAwesome CSS -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Animate.css -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<!-- Custom CSS for the site -->
<link rel="stylesheet" href="/slider_1-main/css/chi_tiet_phim.css">

<!-- Select2 CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css"
	rel="stylesheet" />

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Bootstrap JS -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
	crossorigin="anonymous"></script>

<!-- Select2 JS -->
<script
	src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

<!-- Custom JS files -->


</head>


<body>
	<div th:replace="userViews/header:: .navbar"></div>
	<!-- Modal -->
	<div class="modal fade mt-5" id="exampleModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog customModal_demo_chiTiet">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="custom-btn-close"
						data-bs-dismiss="modal" aria-label="Close">
						<i class="bi bi-x-lg"></i>
					</button>
				</div>
				<div class="modal-body">
					<!-- Hiển thị trailer từ YouTube -->
					<iframe width="560" height="315" id="youtubeVideo"
						th:src="'https://www.youtube.com/embed/' + ${movie.trailerUrl} + '?autoplay=1'"
						title="YouTube video player" frameborder="0"
						allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
						referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
					</iframe>
				</div>
				<div class="modal-footer">
					<div class="card-datve">
						<div class="row g-0">
							<div class="col-md-2">
								<img th:src="${movie.image}" class="img-fluid rounded-start"
									alt="Poster phim">
							</div>
							<div class="col-md-10">
								<div class="card-body">
									<h5 class="card-title"
										th:text="${movie.movieName} + ' - ' + ${movie.genre}">
										Tên phim - Thể loại</h5>
									<div class="tieu-de-nho1">
										Nội dung
										<p id="movieContent" class="mb-0"
											th:text="${movie.content.substring(0, 200) + '...'}"></p>
										<a id="toggleButton" onclick="toggleContent()">Xem thêm</a>
										<p id="fullContent" th:text="${movie.content}"
											style="display: none;"></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- MODAL VIDEO -->
	<div class="khung">
		<!-- Ảnh nền phim -->
		<img th:src="${movie.image_bg}"
			src="https://c.wallhere.com/photos/0d/a6/Marvel_Comics_Marvel_Super_Heroes_looking_at_viewer_digital_art_Iron_Man_superhero_armor_glowing_eyes-2258630.jpg!d"
			alt="" class="hero2">

		<div class="movie-card-big m-0 p-0">
			<div class="container-fluid p-0">
				<!-- Nút phát trailer -->
				<button href="" class="cover1" data-bs-toggle="modal"
					data-bs-target="#exampleModal">
					<i class="bi bi-play-fill"></i>
				</button>

				<!-- Ảnh bìa phim -->
				<a href="#" class="custom-img-chititet-phim" data-bs-toggle="modal"
					data-bs-target="#exampleModal"> <img th:src="${movie.image}"
					alt="cover" class="cover custom-img-chititet-phim"
					style="margin-top: 5%;" />
				</a>

				<div class="hero">
					<div class="details">
						<span class="ghdt" th:text="${movie.ageRestriction}+'+'"></span>
						<div class="title1"
							th:text="${movie.movieName.length() > 40 ? #strings.substring(movie.movieName, 0, 40) + '...' : movie.movieName}">
						</div>
						<div class="title2" th:text="${movie.genre}">The Battle of
							the Five Armies</div>
					</div>
				</div>

				<div class="description">
					<div class="column2 m-0">
						<div class="tieu-de-nho1">
							<p id="movieContent2" class="mb-0"
								th:text="${movie.content.length() > 200 ? movie.content.substring(0, 200) + '...' : movie.content}">
							</p>
							<a id="toggleButton2" onclick="toggleContent2()">Xem thêm</a>
							<p id="fullContent2" th:text="${movie.content}"
								style="display: none;"></p>
						</div>

						<!-- Diễn viên -->
						<span class="tieu-de-nho1"> Diễn viên
							<p
								th:utext="${#strings.arrayJoin(movie.actor.split('\.'), '.<br>')}"></p>
						</span> <span class="tieu-de-nho">
							<div class="tieu-de-item">
								<span>Độ tuổi</span>
								<p th:text="${movie.ageRestriction}+'+'"></p>
							</div>
							<div class="tieu-de-item">
								<span>Thời lượng</span>
								<p th:text="${movie.duration}+' phút'"></p>
							</div>
							<div class="tieu-de-item">
								<span>Thể loại</span>
								<p th:text="${movie.genre}"></p>
							</div>
							<div class="tieu-de-item">
								<span>Đạo diễn</span>
								<p th:text="${movie.director}"></p>
							</div>
							<div class="tieu-de-item"
								th:if="${bookingDatesWithCinemas != null && !bookingDatesWithCinemas.isEmpty()}">
								<span>Thông báo</span>
								<p class="limited-text">
									<span>Vé sẽ được đặt vào:</span> <span
										th:each="entry, iterStat : ${bookingDatesWithCinemas}">
										<!-- Ngày đặt vé --> <span
										th:text="${#temporals.format(entry.key, 'dd-MM-yyyy')}"></span>:
										<!-- Danh sách rạp --> <span
										th:each="cinema, cinemaStat : ${entry.value}"> <span
											th:text="'Tại ' + ${cinema}"></span> <!-- Thêm từ "Tại" trước tên rạp -->
											<span th:if="${!cinemaStat.last}">, </span>
									</span> <span th:if="${!iterStat.last}"> | </span> <!-- Ngăn cách giữa các ngày -->
									</span>
								</p>
							</div>
						</span>
						<div class="cinema">
							<span class="title-xc">Rạp Chiếu</span>
							<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
								<!-- Lặp qua từng rạp trong danh sách cinemaAll và tạo các item cho danh sách -->
								<th:block th:each="cinema, iter : ${cinemaAll}">
									<li class="nav-items" role="presentation">
										<button class="nav-links"
											th:classappend="${iter.index == 0} ? 'active'"
											th:id="'pills-cinema-' + ${cinema.cinemaId} + '-tab'"
											data-bs-toggle="pill"
											th:data-bs-target="'#pills-cinema-' + ${cinema.cinemaId}"
											type="button" role="tab"
											th:aria-controls="'pills-cinema-' + ${cinema.cinemaId}"
											th:aria-selected="${iter.index == 0} ? 'true' : 'false'">
											<span th:text="${cinema.cinemaName}"></span>
										</button>
									</li>
								</th:block>
							</ul>

							<div class="tab-content" id="pills-tabContent">
								<span class="title-xc">Suất Chiếu</span>
								<!-- Lặp qua từng rạp và hiển thị thông tin các suất chiếu của rạp trong tab nội dung -->
								<th:block th:each="cinema, iter : ${cinemaAll}">
									<div class="tab-pane fade"
										th:classappend="${iter.index == 0} ? 'show active'"
										th:id="'pills-cinema-' + ${cinema.cinemaId}" role="tabpanel"
										th:aria-labelledby="'pills-cinema-' + ${cinema.cinemaId} + '-tab'"
										tabindex="0">

										<!-- Lọc suất chiếu hợp lệ -->
										<th:block
											th:with="validShowtimes=${cinema.showtimes.?[
    showDate >= T(java.time.LocalDate).now() &&
    (bookingStartDate == null || bookingStartDate <= T(java.time.LocalDate).now()) &&
    isDeleted
]}">

											<!-- Nếu không có suất chiếu hợp lệ -->
											<th:block th:if="${validShowtimes.isEmpty()}">
												<div class="no-showtimes-message text-center"
													style="margin-top: 20px;">
													<img
														src="https://homepage.momocdn.net/next-js/_next/static/public/cinema/not-found.svg"
														alt="No Showtimes Icon"
														style="width: 100px; height: 100px;">
													<div
														style="font-size: 18px; font-weight: bold; margin-top: 10px; color: #1a1d20">
														Úi, Suất chiếu không tìm thấy.</div>
													<div
														style="font-size: 14px; color: #6c757d; font-weight: 400">
														Bạn hãy thử tìm ngày khác nhé.</div>
												</div>
											</th:block>

											<!-- Nếu có suất chiếu hợp lệ -->
											<th:block th:unless="${validShowtimes.isEmpty()}">
												<!-- Lọc suất chiếu gần bắt đầu -->
												<th:block
													th:with="soonStartingShowtimes=${validShowtimes.?[
                                                    showDate == T(java.time.LocalDate).now() and
                                                    startTime <= T(java.time.LocalTime).now().plusMinutes(30)
                                                ]}">
													<!-- Nếu tất cả suất chiếu hợp lệ đều gần bắt đầu -->
													<th:block
														th:if="${soonStartingShowtimes.size() == validShowtimes.size()}">
														<div class="no-showtimes-message text-center"
															style="margin-top: 20px;">
															<img
																src="https://homepage.momocdn.net/next-js/_next/static/public/cinema/not-found.svg"
																alt="Showtime Close Icon"
																style="width: 100px; height: 100px;">
															<div
																style="font-size: 18px; font-weight: bold; margin-top: 10px; color: #1a1d20">
																Úi, Tất cả các suất chiếu đã gần bắt đầu.</div>
															<div
																style="font-size: 14px; color: #6c757d; font-weight: 400">
																Vui lòng chọn ca khác hoặc thử lại sau.</div>
														</div>
													</th:block>

													<!-- Hiển thị các suất chiếu hợp lệ không gần bắt đầu -->
													<th:block
														th:if="${soonStartingShowtimes.size() < validShowtimes.size()}">
														<div class="showtime-container">
															<th:block th:each="showtime : ${validShowtimes}">
																<th:block
																	th:unless="${soonStartingShowtimes.contains(showtime)}">
																	<div class="showtime-item">
																		<div class="room-name mb-2">
																			<span
																				th:text="${#temporals.format(showtime.showDate, 'dd-MM-yyyy')}"></span>
																		</div>
																		<a href="javascript:void(0);"
																			class="btnXuatChieu mt-5 me-2"
																			th:text="${showtime.room.roomName} + ' | ' + ${showtime.startTime} + ' ~ ' + ${showtime.endTime}"
																			th:attr="onclick='checkLoginBeforeBooking(' + ${showtime.showtimeId} + ')'">
																		</a>
																	</div>
																</th:block>
															</th:block>
														</div>
													</th:block>
												</th:block>
											</th:block>
										</th:block>
									</div>
								</th:block>
							</div>




						</div>

					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="container mt-3 mb-5">

		<div class="row">
			<div class="col-lg-8">
				<!--HTML PHIM CHIEU-->
				<div class="cinema-card">
					<div class="cinema-row">
						<!-- Cột bên trái: Tìm kiếm và chọn rạp -->
						<div class="cinema-col-left">
							<div class="cinema-card-body">
								<div id="cinemaSearch">
									<input type="text" id="searchInput"
										placeholder="Nhập tên rạp để tìm...">
								</div>

								<!-- Danh sách nút chọn rạp -->
								<div id="cinemaButtons">
									<div th:each="cinema : ${cinemas}">
										<button class="cinema-btn"
											th:data-cinema-id="${cinema.cinemaId}"
											th:data-original-name="${cinema.cinemaName}"
											th:text="${cinema.cinemaName}"></button>
									</div>
								</div>
								<button id="showMoreBtn" style="display: none;">Xem
									thêm</button>
							</div>
						</div>

						<!-- Cột bên phải: Hiển thị thông tin rạp và lịch chiếu -->
						<div class="cinema-col-right">
							<!-- Card cho thông tin rạp -->
							<div class="cinema-card-body" id="cinemaInfo"
								style="display: none;">
								<div>
									<h2 id="cinemaName"></h2>
									<p id="cinemaAddress"></p>
								</div>
							</div>

							<!-- Card cho lịch chiếu -->
							<div class="cinema-card-body" id="scheduleSection"
								style="display: none;">
								<h2>Lịch chiếu 7 ngày:</h2>
								<div class="d-flex flex-wrap">
									<ul id="days" class="list-unstyled d-flex flex-wrap">
										<!-- Các nút ngày -->
									</ul>
								</div>
							</div>

							<!-- Card cho danh sách phim -->
							<div class="cinema-card-body" id="movieSection"
								style="display: none;">
								<ul id="movies" class="list-unstyled">
									<!-- Danh sách phim sẽ hiển thị ở đây -->
								</ul>
							</div>
						</div>
					</div>
				</div>

				<section class="custom-comment-card">
					<div class="container my-5">
						<span class="custom_td_col4">Những bình luận khi xem phim</span>
						<div class="row d-flex">
							<div class="col-md-12">
								<div id="reviewList">
									<!-- Thêm ID ở đây -->
									<div th:id="'review-' + ${review.reviewId}" class="cardReview"
										th:each="review : ${reviews}">
										<div class="card-body">
											<div class="d-flex flex-start align-items-center">
												<img class="rounded-circle shadow-1-strong me-3"
													src="/slider_1-main/image/ok.png" alt="avatar" width="40"
													height="40" />
												<div>
													<h6 class="fw-bold text-black mb-1"
														th:text="${review.account.fullName}">Lily Coleman</h6>
													<p class="hiddenReviewDate" style="display: none;"
														th:text="${review.reviewDate}"></p>
													<p class="formattedReviewDate text-muted small mb-0"></p>
												</div>
											</div>

											<div class="row">
												<div class="col-11 text-start">
													<p class="mt-3 mb-4 pb-2 review-content"
														style="color: #1a1d20" th:text="${review.content}">Lorem
														ipsum dolor sit amet...</p>
												</div>
												<div class="col-1 text-end">
													<div class="small d-flex justify-content-start">
														<button
															th:if="${session.acc != null and session.acc.accountId == review.account.accountId}"
															th:onclick="|deleteReview(${review.reviewId})|"
															class="d-flex align-items-center mt-3 customDeleteReview">
															<i class="bi bi-trash3-fill"></i>
														</button>
													</div>
												</div>
											</div>

										</div>
									</div>
								</div>

								<!-- Chỉ hiển thị nút "Xem thêm" nếu có bình luận -->
								<div class="mt-1"
									th:if="${#lists.size(reviews) > 0 && #lists.size(reviews) > 10}">
									<button id="loadMoreBtn" class="icon-link">
										<i class="bi bi-chevron-down"></i>
										<!-- Biểu tượng mũi tên đi xuống -->
										Xem thêm
									</button>
								</div>

							</div>
						</div>

						<div class="card-footer py-3 border-0 mt-2"
							style="background: #fff">
							<div class="d-flex flex-start w-100">
								<img class="rounded-circle shadow-1-strong me-3"
									src="/slider_1-main/image/ok.png" alt="avatar" width="40"
									height="40" />
								<div class="form-outline w-100">
									<textarea id="reviewContent" class="form-control"
										style="background: #fff; height: 90px;"
										placeholder="Bình luận"></textarea>
								</div>
							</div>
							<div class="float-end mt-2 pt-1">
								<button type="button" class="customBtnReviewPost me-2"
									id="postReviewBtn">Đăng</button>
								<button type="button" class="customBtnReviewCancel"
									id="cancelReviewBtn">Hủy</button>
							</div>
						</div>
					</div>
				</section>
			</div>
			<div class="col-lg-4 mt-5" id="movieCardsContainer">
				<div class="mb-3">
					<span class="custom_td_col4">Phim đang chiếu</span>
				</div>
				<div th:each="showtimeDetail : ${showtimeDetails}"
					class="card_MovieDetails">
					<div class="movie-card-chi-tiet ms-0 ps-0 mb-1 mt-0">

						<img th:src="${showtimeDetail.image}" alt=""
							th:onclick="'window.location.href=\'/index/details/' + ${showtimeDetail.movieId} + '\''"
							style="cursor: pointer;" class="movie-poster img-fluid">

						<div class="movie-info">
							<div class="movie-age-rating age-18"
								th:text="${showtimeDetail.ageRestriction}+'+'">18+</div>
							<div class="movie-title"
								th:text="${showtimeDetail.movieName.length() > 40 ? #strings.substring(showtimeDetail.movieName, 0, 40) + '...' : showtimeDetail.movieName}"
								th:onclick="'window.location.href=\'/index/details/' + ${showtimeDetail.movieId} + '\''"
								style="cursor: pointer;">CÁM</div>


							<div class="movie-genre"
								th:text="${showtimeDetail.genre.length() > 25 ? #strings.substring(showtimeDetail.genre, 0, 25) + '...' : showtimeDetail.genre}">
								Kinh Dị</div>
						</div>
						<a th:href="@{/index/details/{id}(id=${showtimeDetail.movieId})}"
							class="movieDetails_btn" style="">Xem</a>
						<!-- <a
                        class="movieDetails_btn">Đặt vé</a>  -->
					</div>
				</div>
				<button id="loadMoreBtn_cardPhimDangChieu"
					class="btn btn-primary mt-3 mb-5">Xem thêm</button>
			</div>
			<!-- đóng col-lg-4  -->

		</div>
		<!--đóng row  -->
	</div>
	<!-- đóng container -->


	<div class="container-fluid" style="background: #151515">
		<div class="movie-list-container">
			<div class="movie-list-wrapper">
				<div class="movie-list">
					<!-- Sử dụng th:block để lặp qua danh sách phim -->
					<th:block th:each="movieDetail : ${movieDetails}">
						<div class="movie-list-item">
							<img class="movie-list-item-img" th:src="${movieDetail.image_bg}"
								alt="Movie Image"> <a class="movie-list-item-button"
								th:href="@{/index/details/{id}(id=${movieDetail.movieId})}">Chi
								tiết</a>
						</div>
					</th:block>
				</div>
				<i class="fas fa-chevron-right arrow"></i>
			</div>
		</div>

		<!--list 2-->
		<div class="movie-list-container">
			<div class="movie-list-wrapper">
				<div class="movie-list">
					<!-- Sử dụng th:block để lặp qua danh sách phim -->
					<th:block th:each="movieDetail : ${movieDetails}">
						<div class="movie-list-item">
							<img class="movie-list-item-img" th:src="${movieDetail.image}"
								alt="Movie Image"> <a class="movie-list-item-button"
								th:href="@{/index/details/{id}(id=${movieDetail.movieId})}">Chi
								tiết</a>
						</div>
					</th:block>
				</div>
				<i class="fas fa-chevron-right arrow"></i>
			</div>
		</div>
	</div>


	<!-- FOOTER -->
	<div th:replace="userViews/footer:: footer"></div>
	<!-- FOOTER -->
		<script src="/slider_1-main/js/help.js"></script>
	
	<script>
    function checkLoginBeforeBooking(showtimeId) {
        // Kiểm tra nếu tài khoản chưa đăng nhập
        if (!accId) {
            Swal.fire({
                title: "Vui lòng đăng nhập",
                text: "Bạn cần đăng nhập trước khi đặt vé.",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Đăng nhập",
                cancelButtonText: "Hủy"
            }).then((result) => {
                if (result.isConfirmed) {
                    // Điều hướng đến trang đăng nhập
                    window.location.href = "/login";
                }
            });
        } else {
            // Nếu đã đăng nhập, chuyển hướng đến trang đặt vé
            window.location.href = `/booking/${showtimeId}`;
        }
    }
</script>

	<script>

    /*Mờ scrip video auto play  */
    $(document).ready(function () {
        // Khi modal được hiển thị
        $('#exampleModal').on('shown.bs.modal', function () {
            var iframe = $('#youtubeVideo');
            var currentSrc = iframe.attr('src');

            // Nếu src không có autoplay, thêm vào
            if (!currentSrc.includes('autoplay=1')) {
                iframe.attr('src', currentSrc + '?autoplay=1');
            }
        });

        // Khi modal bị đóng
        $('#exampleModal').on('hide.bs.modal', function () {
            // Xóa autoplay để video có thể bắt đầu từ đầu khi mở lại
            var iframe = $('#youtubeVideo');
            var currentSrc = iframe.attr('src');
            // Thay thế 'autoplay=1' với '' để dừng video
            iframe.attr('src', currentSrc.replace(/([&?])autoplay=1/, '')); // Xóa autoplay
        });
    });
    /*Đóng scrip video auto play  */

    /*Mờ scrip xem them text  */
    function toggleContent() {
        const contentElement = document.getElementById('movieContent');
        const fullContentElement = document.getElementById('fullContent');
        const buttonElement = document.getElementById('toggleButton');

        if (fullContentElement.style.display === "none" || fullContentElement.style.display === "") {
            // Hiển thị toàn bộ nội dung
            contentElement.style.display = "none";
            fullContentElement.style.display = "block";
            buttonElement.textContent = "Thu gọn";
        } else {
            // Hiển thị nội dung ngắn
            contentElement.style.display = "block";
            fullContentElement.style.display = "none";
            buttonElement.textContent = "Xem thêm";
        }
    }

    /*Đóng scrip xem them text  */
    function toggleContent2() {
        const contentElement = document.getElementById('movieContent2');
        const fullContentElement = document.getElementById('fullContent2');
        const buttonElement = document.getElementById('toggleButton2');

        if (fullContentElement.style.display === "none" || fullContentElement.style.display === "") {
            // Hiển thị toàn bộ nội dung
            contentElement.style.display = "none";
            fullContentElement.style.display = "block";
            buttonElement.textContent = "Thu gọn";
        } else {
            // Hiển thị nội dung ngắn
            contentElement.style.display = "block";
            fullContentElement.style.display = "none";
            buttonElement.textContent = "Xem thêm";
        }
    }

    /*Mờ scrip xem them card  */
    // JavaScript to handle Load More functionality
    const movieCards = document.querySelectorAll('.card_MovieDetails'); // Chọn tất cả thẻ phim
    const loadMoreBtn = document.getElementById('loadMoreBtn_cardPhimDangChieu');
    let visibleCards = 7; // Số thẻ ban đầu hiển thị

    // Ẩn tất cả các thẻ trừ 13 thẻ đầu tiên
    for (let i = visibleCards; i < movieCards.length; i++) {
        movieCards[i].style.display = 'none';
    }

    // Ẩn nút nếu không có đủ thẻ
    if (movieCards.length <= visibleCards) {
        loadMoreBtn.style.display = 'none';
    }

    // Hàm để tải thêm thẻ
    loadMoreBtn.addEventListener('click', function () {
        const newVisibleCards = visibleCards + 2; // Hiển thị thêm 2 thẻ mỗi lần
        for (let i = visibleCards; i < newVisibleCards && i < movieCards.length; i++) {
            movieCards[i].style.display = 'block'; // Hiển thị 2 thẻ bị ẩn tiếp theo
        }
        visibleCards = newVisibleCards;

        // Ẩn nút nếu đã hiển thị tất cả các thẻ
        if (visibleCards >= movieCards.length) {
            loadMoreBtn.style.display = 'none';
        }
    });


    document.addEventListener('DOMContentLoaded', () => {
        let loadMoreBtn = document.querySelector('#load-more');
        let currentItem = 9; // Number of boxes to display initially
        let loadMoreAmount = 3; // Number of boxes to display on each button click

        // Function to display boxes
        const displayBoxes = (start, count) => {
            let boxes = [...document.querySelectorAll('.container .box-container .box-card')];
            for (let i = start; i < start + count; i++) {
                if (boxes[i]) { // Check if the box exists
                    boxes[i].style.display = 'inline-block';
                }
            }
        }

        // Display 6 boxes initially
        displayBoxes(0, currentItem);

        loadMoreBtn.onclick = () => {
            let boxes = [...document.querySelectorAll('.container .box-container .box-card')];
            displayBoxes(currentItem, loadMoreAmount); // Show 3 more boxes
            currentItem += loadMoreAmount; // Increment the number of displayed boxes

            if (currentItem >= boxes.length) {
                loadMoreBtn.style.display = 'none'; // Hide button if no more boxes
            }
        }
    });
    /*Đóng scrip xem them card  */

    /*JS BTN CHUYEN CARD NGANG*/
    const arrows = document.querySelectorAll(".arrow");
    const movieLists = document.querySelectorAll(".movie-list");

    arrows.forEach((arrow, i) => {
        const itemNumber = movieLists[i].querySelectorAll("img").length;
        let clickCounter = 0;
        arrow.addEventListener("click", () => {
            const ratio = Math.floor(window.innerWidth / 270);
            clickCounter++;
            if (itemNumber - (4 + clickCounter) + (4 - ratio) >= 0) {
                movieLists[i].style.transform = `translateX(${
                    movieLists[i].computedStyleMap().get("transform")[0].x.value - 300
                }px)`;
            } else {
                movieLists[i].style.transform = "translateX(0)";
                clickCounter = 0;
            }
        });

        console.log(Math.floor(window.innerWidth / 270));
    });


    // Hàm xử lý đăng bình luận
    let currentReviewId = null; // Biến để lưu ID của bình luận hiện tại đang sửa
    var accId = null; // Khởi tạo accId với giá trị null
    var spanElement = document.getElementById("accId");
    if (spanElement) {
        accId = spanElement.textContent || null; // Lấy giá trị từ thẻ span
    }
    console.log("Tài khoản hiện tại là: " + accId);

    document.getElementById('cancelReviewBtn').addEventListener('click', function () {
        document.getElementById('reviewContent').value = null;
    });

    function postReview() {
        const content = document.getElementById('reviewContent').value.trim();
        if (!content) {
            Swal.fire({
                icon: "error",
                title: "Thông báo!",
                text: "Vui lòng nhập nội dung bình luận!",
            });
            return;
        }

        const currentDate = new Date();
        const reviewDate = currentDate.toISOString();
        const pathArray = window.location.pathname.split('/');
        const movieId = pathArray[pathArray.length - 1];
        const accountId = accId;

        if (accountId === null) {
            Swal.fire({
                title: "Vui lòng đăng nhập",
                text: "Bạn cần đăng nhập trước khi bình luận.",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Đăng nhập",
                cancelButtonText: "Hủy"
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = "/login";
                } else {
                    document.getElementById('reviewContent').value = null;
                }
            });
            return;
        }

        fetch(`/api/reviews/can-review?accountId=${accountId}&movieId=${movieId}`)
            .then(response => response.json())
            .then(canReview => {
                if (!canReview) {
                    Swal.fire({
                        icon: "warning",
                        title: "Thông báo!",
                        text: "Bạn phải mua vé xem phim này mới có thể bình luận.",
                    });
                    return;
                }

                const review = {
                    content: content,
                    account: {accountId: accountId},
                    movie: {movieId: movieId},
                    reviewDate: reviewDate
                };

                fetch('/api/reviews', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(review)
                })
                    .then(response => {
                        if (!response.ok) {
                            return response.json().then(errorData => {
                                throw new Error(errorData.error || 'Có lỗi xảy ra khi đăng bình luận.');
                            });
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Bình luận đã được đăng:', data);
                        location.reload(); // Tải lại trang sau khi đăng bình luận thành công
                    })
                    .catch(error => {
                        Swal.fire({
                            icon: 'error',
                            title: 'Thông báo!',
                            text: error.message
                        });
                        console.error('Lỗi khi đăng bình luận:', error);
                    });

                currentReviewId = null;
            })
            .catch(error => {
                console.error('Lỗi khi kiểm tra quyền bình luận:', error);
            });
    }


    document.getElementById('postReviewBtn').addEventListener('click', postReview);

    document.getElementById('reviewContent').addEventListener('keydown', function (event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            postReview();
        }
    });


    /*FOTMAT DATETIME*/
    // Hàm formatDate như bạn đã định nghĩa
    // Hàm định dạng ngày như bạn đã định nghĩa
    function formatDate(date) {
        const hours = String(date.getHours()).padStart(2, '0'); // Lấy giờ
        const minutes = String(date.getMinutes()).padStart(2, '0'); // Lấy phút
        const day = String(date.getDate()).padStart(2, '0'); // Lấy ngày
        const month = String(date.getMonth() + 1).padStart(2, '0'); // Lấy tháng
        const year = date.getFullYear(); // Lấy năm

        // Trả về chuỗi định dạng với màu sắc cho ngày
        return `${hours}:${minutes} <span style="color: #ff4971;">${day}-${month}-${year}</span>`;
    }

    // Hàm tính số ngày đã trôi qua kể từ ngày đăng
    function calculateDaysAgo(postedDate) {
        const currentDate = new Date(); // Ngày hiện tại
        const postDate = new Date(postedDate); // Ngày đăng từ chuỗi

        // Tính số mili-giây giữa hai ngày
        const timeDifference = currentDate - postDate;

        // Chuyển đổi mili-giây thành số ngày và cộng thêm 1 ngày
        const daysAgo = Math.floor(timeDifference / (1000 * 60 * 60 * 24)) + 1;

        // Kiểm tra nếu là 1 ngày (ngày đăng trong vòng 24 giờ qua), trả về "vừa đăng"
        return daysAgo === 1 ? "vừa đăng" : `${daysAgo} ngày trước`;
    }

    // Lấy tất cả các thẻ chứa ngày ẩn và ngày hiển thị
    const hiddenDates = document.querySelectorAll('.hiddenReviewDate');
    const formattedDates = document.querySelectorAll('.formattedReviewDate');

    // Kiểm tra số lượng thẻ có khớp nhau không
    if (hiddenDates.length === formattedDates.length) {
        hiddenDates.forEach((hiddenDateElement, index) => {
            const reviewDate = new Date(hiddenDateElement.innerText); // Ngày từ thẻ ẩn

            // Định dạng và tính số ngày trước
            const formattedDate = formatDate(reviewDate);
            const daysAgo = calculateDaysAgo(reviewDate);

            // Cập nhật nội dung thẻ hiển thị với ngày đã định dạng
            formattedDates[index].innerHTML = `Vào lúc ${formattedDate} (${daysAgo}).`;
        });
    } else {
        console.error('Số lượng thẻ chứa ngày ẩn và thẻ hiển thị không khớp!');
    }


    /*JS XÓA BÌNH LUẬN THEO ID*/
    // Hàm gọi API để xóa bình luận
    function deleteReview(reviewId) {
        Swal.fire({
            title: "Bạn muốn xóa bình luận này không?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Ok!",
            cancelButtonText: "Hủy", // Thay đổi văn bản nút hủy thành "Hủy"
            customClass: {
                title: 'my-title', // Tên lớp tùy chỉnh cho tiêu đề
                content: 'my-content' // Tên lớp tùy chỉnh cho nội dung
            }
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: `/api/reviews/${reviewId}`,
                    type: 'DELETE',
                    success: function (response) {
                        Swal.fire({
                            title: "Xóa bình luận thành công!",
                            icon: "success",
                            customClass: {
                                title: 'my-title',
                                content: 'my-content'
                            }
                        }).then(() => {
                            // Tìm và xóa phần tử bình luận trong DOM
                            const reviewElement = document.getElementById(`review-${reviewId}`);
                            if (reviewElement) {
                                reviewElement.remove(); // Xóa phần tử bình luận khỏi DOM
                            }
                        });
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        Swal.fire({
                            title: "Có lỗi xảy ra!",
                            text: "Vui lòng thử lại sau.",
                            icon: "error",
                            customClass: {
                                title: 'my-title',
                                content: 'my-content'
                            }
                        });
                    }
                });
            }
        });
    }

    /*CLOSE JS DELETE REVIEW*/

    document.addEventListener("DOMContentLoaded", function () {
        let reviewCards = document.querySelectorAll('.cardReview');
        let loadMoreBtn = document.getElementById('loadMoreBtn');
        let currentCount = 10; // Số thẻ review hiển thị ban đầu
        let loadMoreAmount = 3; // Số thẻ review hiển thị thêm mỗi lần nhấn nút

        // Hàm hiển thị thẻ review
        const displayReviews = (start, count) => {
            for (let i = start; i < start + count; i++) {
                if (reviewCards[i]) { // Kiểm tra nếu thẻ review tồn tại
                    reviewCards[i].classList.add('show'); // Thêm lớp show để hiển thị
                }
            }
        }

        // Hiển thị 3 thẻ review đầu tiên
        displayReviews(0, currentCount);

        loadMoreBtn.addEventListener('click', function () {
            displayReviews(currentCount, loadMoreAmount); // Hiển thị thêm thẻ review

            currentCount += loadMoreAmount; // Tăng số lượng thẻ review đã hiển thị

            // Ẩn nút "Xem thêm" nếu không còn thẻ review nào ẩn
            if (currentCount >= reviewCards.length) {
                loadMoreBtn.style.display = 'none'; // Ẩn nút nếu không còn thẻ review
            }
        });
    });


    /*JS KIỂM TRA PHẢI MUA PHIM ĐÓ MỚI COMMENT PHIM ĐÓ ĐƯỢC*/


    /*JS GET CINEMAID*/
    function submitCinemaId(cinemaId) {
        // Cập nhật giá trị cinemaId vào input ẩn
        document.getElementById('cinemaIdInput').value = cinemaId;

        // Submit form để gửi cinemaId
        document.getElementById('cinemaForm').submit();
    }


</script>
	<script>
$(document).ready(function () {
    var accId = null;
    var spanElement = document.getElementById("accId");
    if (spanElement) {
        accId = spanElement.textContent || null;
    }
    if (cinemaButtons.length > 6) {
        cinemaButtons.slice(6).hide(); // Ẩn các rạp từ thứ 4 trở đi
        $('#showMoreBtn').show(); // Hiển thị nút "Xem thêm"
    }

    // Khi nhấn nút "Xem thêm"
    $('#showMoreBtn').on('click', function () {
        cinemaButtons.slice(6).show(); // Hiển thị các rạp ẩn đi
        $(this).hide(); // Ẩn nút "Xem thêm" sau khi bấm
    });
    const firstCinema = $('.cinema-btn').first();
    if (firstCinema.length > 0) {
        const firstCinemaId = firstCinema.data('cinema-id');
        firstCinema.addClass('active');

        $.get(`/cinemas/${firstCinemaId}/next7days`, function (data) {
        	$('#cinemaName').text(`${data.cinemaName}`);
        	$('#cinemaAddress').html(`Địa chỉ rạp: <span>${data.cinemaAddress}</span>`);
            $('#cinemaInfo').show();

            const schedule = data.schedule;
            $('#days').empty();
            if (schedule.length > 0) {
            	schedule.forEach((day, index) => {
                    const dateObj = new Date(day.date);
                    const today = new Date();

                    const formattedDate = dateObj.toLocaleDateString('vi-VN', {
                        day: '2-digit',
                        month: '2-digit',
                    });

                    const weekday = dateObj.toLocaleDateString('vi-VN', { weekday: 'short' });

                    // Kiểm tra nếu là ngày hôm nay
                    const isToday = dateObj.toDateString() === today.toDateString();

                    $('#days').append(
                        `<li>
                            <button class="day-btn ${index === 0 ? 'active' : ''}" data-date="${day.date}" data-cinema="${firstCinemaId}">
                                ${isToday ? 'H.Nay' : formattedDate} (${weekday}) <!-- Hiển thị "Hôm nay" nếu là ngày hôm nay -->
                            </button>
                        </li>`
                    );
                });

                const firstDate = schedule[0].date;

                // Lấy danh sách phim và suất chiếu cho ngày đầu tiên
                loadMoviesAndShowtimes(firstCinemaId, firstDate);
            }

            $('#scheduleSection').show();
        });
    }
    $('.cinema-btn').each(function (index) {
        const cinemaName = $(this).data('original-name'); // Lấy tên đầy đủ từ data-original-name
        if (cinemaName.length > 14) {
            const firstLine = cinemaName.substring(0, 14); // Lấy 14 ký tự đầu tiên
            const remaining = cinemaName.substring(14); // Phần còn lại của tên
            $(this).html(`${firstLine}<br>${remaining}`); // Thêm thẻ <br> để xuống dòng
        } else {
            $(this).text(cinemaName); // Hiển thị tên đầy đủ nếu không vượt quá 14 ký tự
        }
        // Thêm thẻ <hr> giữa các rạp (trừ nút cuối cùng)
        if (index !== $('.cinema-btn').length - 1) {
            $(this).after('<hr style="border: 1px solid #d4d4d4; margin: 10px 0;">');
        }
    });


    // Khi chọn rạp
    $(document).on('click', '.cinema-btn', function () {
        const cinemaId = $(this).data('cinema-id');
        $('.cinema-btn').removeClass('active');
        $(this).addClass('active');

        $.get(`/cinemas/${cinemaId}/next7days`, function (data) {
            $('#cinemaName').text(data.cinemaName);
            $('#cinemaAddress').html(`Địa chỉ rạp: <span>${data.cinemaAddress}</span>`);

            $('#cinemaInfo').show();

            const schedule = data.schedule;
            $('#days').empty();
            if (schedule.length > 0) {
                schedule.forEach((day, index) => {
                    const dateObj = new Date(day.date);
                    const today = new Date();

                    const dayNumber = dateObj.getDate().toString().padStart(2, '0'); // Đảm bảo 2 chữ số
                    const monthNumber = (dateObj.getMonth() + 1).toString().padStart(2, '0'); // Đảm bảo 2 chữ số 

                    const weekday = dateObj.toLocaleDateString('vi-VN', { weekday: 'short' }); // Lấy tên thứ (T2, T3, v.v.)

                    // Kiểm tra nếu là ngày hôm nay
                    const isToday = dateObj.toDateString() === today.toDateString();

                    $('#days').append(
                        `<li>
                            <button class="day-btn ${index === 0 ? 'active' : ''}" data-date="${day.date}" data-cinema="${cinemaId}">
                                ${isToday ? 'H.Nay' : dayNumber + '-' + monthNumber} (${weekday}) <!-- Hiển thị "Hôm nay" nếu là ngày hôm nay -->
                            </button>
                        </li>`
                    );
                });


                const firstDate = schedule[0].date;

                // Lấy danh sách phim và suất chiếu cho ngày đầu tiên
                loadMoviesAndShowtimes(cinemaId, firstDate);
            }

            $('#scheduleSection').show();
        });
    });

    // Khi chọn ngày
    $(document).on('click', '.day-btn', function () {
        const date = $(this).data('date');
        const cinemaId = $(this).data('cinema');
        $('.day-btn').removeClass('active');
        $(this).addClass('active');

        // Lấy danh sách phim và suất chiếu cho ngày đã chọn
        loadMoviesAndShowtimes(cinemaId, date);
    });

    function loadMoviesAndShowtimes(cinemaId, date) {
        $.get(`/index/${cinemaId}/movies/${date}`, function (movies) {
            $('#movies').empty();
            if (movies.length > 0) {
                const now = new Date(); // Giờ hiện tại
                console.log("Movies: ", movies); // In danh sách phim ra console để kiểm tra

                movies.forEach((movie) => {
                    console.log("Movie: ", movie); // In từng movie ra console để kiểm tra

                    $('#movies').append(`
                        <li style="margin-bottom: 15px; padding: 15px;">
                            <a href="/index/details/${movie.movieId}" style="display: flex; align-items: flex-start; text-decoration: none; color: inherit;">
                                <img src="${movie.image}" alt="${movie.movieName}" style="width: 100px; height: 150px; margin-right: 15px; border-radius: 8px;">
                                <div style="flex: 1;">
                                    <span style="font-size: 14px; color: white; background-color: #b5c632; border-radius: 5px; padding: 2px 3px;">${movie.ageRestriction}+</span>
                                    <strong style="display: block; font-size: 16px; margin-top: 5px;">${movie.movieName}</strong>
                                    <span style="display: block; font-size: 14px; color: gray; margin-bottom: 10px;">${movie.genre}</span>
                                    <ul class="showtimesForMovie" id="showtimes_${movie.movieId}" style="margin-top: 10px; padding: 0; list-style: none;">
                                        <!-- Danh sách suất chiếu của phim sẽ được thêm vào đây -->
                                    </ul>
                                </div>
                            </a>
                        </li>
                        <hr style="border: 1px solid #ddd; margin: 10px 0;"> <!-- Thêm thẻ hr sau mỗi phim -->
                    `);

                    // Lấy danh sách suất chiếu cho phim
                    $.get(`/index/${cinemaId}/next7days/showtimes/${date}`, function (movieSchedules) {
                        console.log("Movie Schedules: ", movieSchedules); // In lịch chiếu phim ra console để kiểm tra
                        
                        const showtimesList = $(`#showtimes_${movie.movieId}`);
                        const movieSchedule = movieSchedules.find(schedule => schedule.movieId === movie.movieId);
                        
                        console.log("Movie Schedule: ", movieSchedule); // In lịch chiếu cụ thể của phim ra console để kiểm tra

                        if (movieSchedule && movieSchedule.showtimes.length > 0) {
                            let hasUpcomingShowtime = false; // Biến kiểm tra có suất chiếu hợp lệ không
                            let hasNoValidShowtimes = true; // Biến kiểm tra xem có suất chiếu hợp lệ nào không

                            movieSchedule.showtimes.forEach((showtime) => {
                            	
                                const showtimeDate = new Date(`${date}T${showtime.startTime}`);  // Convert showtime to full ISO format
                                const bookingStartDate = new Date(showtime.bookingStartTime); // Ngày bắt đầu đặt vé
                                const now = new Date(); // Giờ hiện tại

                                // Kiểm tra nếu chưa đến ngày bắt đầu đặt vé (bookingStartDate)
                                if (bookingStartDate > now) {
                                    console.log(`Chưa thể đặt vé cho suất chiếu: ${showtime.startTime}`);
                                    // Nếu chưa đến ngày bắt đầu đặt vé, hiển thị thông báo "Chưa có suất chiếu"
                                    showtimesList.append(`
                                        <li style="color: gray; border: 1px solid #ddd; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                            Chưa có suất chiếu cho phim này
                                        </li>
                                    `);
                                    hasNoValidShowtimes = false; // Đánh dấu là không có suất chiếu hợp lệ
                                    return; // Dừng kiểm tra các suất chiếu tiếp theo
                                }

                                // Kiểm tra nếu suất chiếu đã qua thời gian hiện tại
                                if (showtimeDate < now) {
                                    console.log(`Suất chiếu đã qua: ${showtime.startTime}`);
                                    // Nếu suất chiếu đã qua, hiển thị thông báo "Suất chiếu đã qua"
                                    showtimesList.append(`
                                        <li style="color: gray; border: 1px solid #ddd; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                            Suất chiếu đã qua
                                        </li>
                                    `);
                                    hasNoValidShowtimes = false; // Đánh dấu là không có suất chiếu hợp lệ
                                    return; // Dừng kiểm tra các suất chiếu tiếp theo
                                }

                                // Nếu cả hai điều kiện trên không xảy ra, hiển thị suất chiếu
                                showtimesList.append(`
                                    <a href="javascript:void(0)" 
                                       class="btnShowtime" 
                                       style="margin: 5px; text-align: center; background: #fff; color: #ff3d49; padding: 5px 10px; border: 1px solid #ff3d49; border-radius: 4px; font-size: 14px; text-decoration: none; display: inline-block;"
                                       data-showtime-id="${showtime.showtimeId}" 
                                       data-room="${showtime.room}" 
                                       data-start-time="${showtime.startTime}" 
                                       data-end-time="${showtime.endTime}">
                                        ${showtime.startTime} ~ ${showtime.endTime}
                                    </a>
                                `);
                                hasUpcomingShowtime = true; // Đánh dấu có suất chiếu hợp lệ
                                hasNoValidShowtimes = false; // Đánh dấu là có suất chiếu hợp lệ
                            });

                            // Nếu không có suất chiếu hợp lệ, hiển thị thông báo "Không còn suất chiếu cho phim này"
                            if (!hasUpcomingShowtime && hasNoValidShowtimes) {
                                showtimesList.append('<li style="color: gray; border: 1px solid #ddd; padding: 10px; border-radius: 5px; margin-top: 10px;">Không còn suất chiếu cho phim này</li>');
                            }
                        } else {
                            // Hiển thị thông báo nếu không có suất chiếu cho phim này
                            showtimesList.append('<li style="color: gray; border: 1px solid #ddd; padding: 10px; border-radius: 5px; margin-top: 10px;">Không còn suất chiếu cho phim này</li>');
                        }
                    });

                });
            } else {
                $('#movies').append(`
                    <li style="text-align: center;">
                        <img src="https://homepage.momocdn.net/next-js/_next/static/public/cinema/not-found.svg" alt="Không có suất chiếu" style="width: 250px; height: 100px;">
                        <span style="display: block; font-size: 18px; color: #333; margin-top: 10px; font-weight: bold;">
                            Úi, Suất chiếu không tìm thấy.
                        </span>
                        <span style="display: block; font-size: 14px; color: #555; margin-top: 5px;">
                            Bạn hãy thử tìm ngày khác nhé.
                        </span>
                    </li>
                `);
            }

            $('#movieSection').show(); // Hiển thị phần danh sách phim
        });
    }


    function checkLoginBeforeBooking(showtimeId) {
        if (!accId) {
            Swal.fire({
                title: "Vui lòng đăng nhập",
                text: "Bạn cần đăng nhập trước khi đặt vé.",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Đăng nhập",
                cancelButtonText: "Hủy"
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = "/login";
                }
            });
        } else {
            window.location.href = `/booking/${showtimeId}`;
        }
    }

    $(document).on('click', '.btnShowtime', function (e) {
        e.preventDefault();
        let showtimeId = $(this).data('showtime-id');
        checkLoginBeforeBooking(showtimeId);
    });
    $('#searchInput').on('input', function () {
        const keyword = $(this).val().toLowerCase(); // Lấy từ khóa và chuyển thành chữ thường
        $('.cinema-btn').each(function () {
            const cinemaName = $(this).data('original-name').toLowerCase(); // Dùng tên đầy đủ từ data-original-name
            if (cinemaName.includes(keyword)) {
                $(this).show(); // Hiển thị nếu có liên quan
            } else {
                $(this).hide(); // Ẩn nếu không liên quan
            }
        });
    });
});


</script>
	<style>
.modal.fade .modal-dialog {
	transform: translateY(-50px);
	opacity: 0;
	transition: all 0.4s ease-out;
}

.modal.show .modal-dialog {
	transform: translateY(0);
	opacity: 1;
}

.modal-backdrop {
	transition: opacity 0.4s ease-out;
}

.cinema-card {
	background-color: #ffffff;
	border-radius: 12px;
	padding: 20px;
	margin: 20px auto;
	width: 100%;
	margin-top: 40px;
	height: 500px; /* Chiều cao cố định */
	overflow-y: auto;

	/* Hiển thị thanh cuộn khi nội dung vượt quá chiều cao */
}

.cinema-row {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}

/* Cột trái */
.cinema-col-left {
	flex: 1 1 30%;
	padding: 20px;
	background-color: #ffffff;
	border-right: 0.1px solid #d4d4d4;
}

#cinemaSearch input {
	width: 100%;
	padding: 10px;
	margin-bottom: 20px;
	border: 1px solid #ff3d49;
	border-radius: 3px;
	outline: none;
	font-size: 14px;
	transition: all 0.3s ease;
}

#cinemaSearch input:focus {
	border-color: #ff3d49;
	box-shadow: 0 0 10px rgba(0, 123, 255, 0.3);
}

#cinemaButtons .cinema-btn {
	width: 220px;
	padding: 6px 20px;
	margin-bottom: 10px;
	font-size: 16px;
	background-color: #fff; /* Màu nền bên trong */
	border: none;
	cursor: pointer;
	text-align: left;
	transition: all 0.3s ease;
	color: #ff3d49;
	font-weight: bold;
}

#cinemaButtons .cinema-btn:hover {
	background-color: #ff3d49;
	color: #fff;
	transform: scale(1.05);
}

/* Cột phải */
.cinema-col-right {
	flex: 1 1 65%;
	padding: 20px;
	background-color: #ffffff;
	border-radius: 10px;
}

.cinema-card-body {
	padding-bottom: 20px;
}

.cinema-card-body h2 {
	font-size: 28px;
	font-weight: 800;
	color: #ff3d49;
	margin-bottom: 10px;
	font-family: var(--bs-font-sans-serif);
}

.cinema-card-body p {
	font-size: 16px;
	color: #666;
	font-weight: 400;
	font-family: var(--bs-font-sans-serif);
}

/* Lịch chiếu */
#days button {
	margin: 5px;
	padding: 10px;
	width: 59px;
	font-size: 13px;
	background-color: #ececec; /* Màu nền bên trong */
	border: none;
	color: black;
	border-radius: 3px;
	cursor: pointer;
	font-family: var(--bs-font-sans-serif);
	transition: all 0.3s ease;
}

#days button.active {
	background-color: #ff3d49; /* Nền đỏ khi active */
	color: #fff; /* Chữ trắng khi active */
	border-color: #ff3d49; /* Đồng bộ màu viền */
	transform: scale(1.1); /* Hiệu ứng phóng to hơn khi active */
}
/* Danh sách phim */
#movies li {
	padding: 15px;
	background-color: white;
	margin-bottom: 10px;
	transition: all 0.3s ease;
}

#movies li img {
	transition: transform 0.3s ease; /* Tạo hiệu ứng mượt */
}

#movies li img:hover {
	transform: scale(1.05); /* Phóng to nhẹ 5% */
}

#movies li strong {
	transition: color 0.3s ease; /* Tạo hiệu ứng mượt khi đổi màu */
}

#movies li strong:hover {
	color: red; /* Đổi màu sang đỏ khi hover */
}

/* Hiệu ứng nút "Xem thêm" */
#showMoreBtn {
	display: block; /* Đảm bảo nút chiếm toàn bộ chiều rộng */
	margin: 10px auto; /* Căn giữa bằng cách đặt margin auto */
	padding: 10px 20px;
	background-color: #ff3d49;
	color: #fff;
	border: none;
	border-radius: 5px;
	cursor: pointer;
	transition: all 0.3s ease;
	text-align: center; /* Căn giữa text trong nút */
}

#showMoreBtn:hover {
	background-color: #d9534f;
	transform: scale(1.1);
}

.cinema-btn.active {
	background-color: #ff3d49 !important;
	color: white !important;
	border-color: #ff3d49 !important;
}
/* Phần chứa suất chiếu */
.showtimesForMovie {
	display: flex;
	flex-wrap: wrap;
	/* Đảm bảo các nút suất chiếu tự động xuống dòng nếu không đủ chỗ */
	gap: 10px; /* Khoảng cách giữa các nút */
	padding: 0;
	margin: 0;
	list-style: none; /* Xóa bullet của danh sách */
}

.showtimesForMovie li {
	display: inline-block; /* Đặt mỗi suất chiếu là một mục inline */
	margin: 5px 5px 0 0; /* Khoảng cách giữa các nút */
}

.showtimesForMovie a {
	display: inline-block;
	padding: 5px 10px; /* Tăng kích thước nút */
	border: 1px solid #ff3d49; /* Màu viền */
	border-radius: 4px; /* Bo góc cho nút */
	font-size: 14px;
	color: #ff3d49; /* Màu chữ */
	text-decoration: none; /* Xóa gạch chân */
	background-color: #fff; /* Màu nền */
	transition: all 0.3s ease; /* Hiệu ứng hover */
}

.showtimesForMovie a:hover {
	background-color: #ff3d49; /* Đổi màu nền khi hover */
	color: #fff; /* Đổi màu chữ khi hover */
}

/* Phòng chiếu VIP */
.showtimesForMovie a[data-room="VIP"] {
	background-color: #ffe5e9;
	border: 2px dashed #ff3d49;
}

.showtimesForMovie a[data-room="VIP"]:hover {
	background-color: #ff3d49;
	color: #fff;
	border-color: #ff3d49;
}

.limited-text {
	max-width: 34ch; /* Giới hạn số ký tự trong một dòng */
	white-space: normal; /* Cho phép xuống dòng */
	word-wrap: break-word; /* Tự động xuống dòng khi gặp từ quá dài */
}
</style>

	<script src="/slider_1-main/js/search.js"></script>
	<script src="/slider_1-main/js/local.js"></script>
</body>
</html>